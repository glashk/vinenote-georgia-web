@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Brand + surfaces (inspired by your auth screen: soft glass + elegant green) */
    --vn-text: 17 24 39; /* slate-900 */
    --vn-muted: 71 85 105; /* slate-600 */

    --vn-brand: 45 90 39; /* auth button green */
    --vn-brand-strong: 24 70 33;

    --vn-surface: 255 255 255;
    --vn-surface-alpha: 0.58; /* glass */
    --vn-border-alpha: 0.35;

    --vn-shadow: 0 18px 50px rgba(15, 23, 42, 0.12);
  }

  html {
    color-scheme: light;
  }

  /* Allow text selection everywhere by default */
  *,
  *::before,
  *::after {
    -webkit-user-select: text;
    user-select: text;
  }

  body {
    @apply text-slate-900 antialiased;
    /* Subtle "photo-friendly" base that works under glass cards */
    background:
      radial-gradient(1200px 600px at 10% 0%, rgba(45, 90, 39, 0.12), transparent 55%),
      radial-gradient(900px 500px at 90% 10%, rgba(107, 29, 29, 0.10), transparent 55%),
      linear-gradient(180deg, #ffffff 0%, #f8fafc 100%);
  }

  ::selection {
    background: rgba(var(--vn-brand), 0.22);
  }
}

@layer utilities {
  @keyframes float {
    0%, 100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(18px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.9);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes shimmer {
    0% {
      background-position: -1000px 0;
    }
    100% {
      background-position: 1000px 0;
    }
  }

  .animate-float {
    animation: float 3s ease-in-out infinite;
  }

  .animate-fade-in-up {
    animation: fadeInUp 0.6s ease-out forwards;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  .animate-fade-in {
    animation: fadeIn 0.35s ease-out forwards;
  }

  .animate-fade-in-stagger {
    animation: fadeIn 0.4s ease-out both;
  }

  .animate-scale-in {
    animation: scaleIn 0.5s ease-out forwards;
  }

  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(100%);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes slideOutRight {
    from {
      opacity: 1;
      transform: translateX(0);
    }
    to {
      opacity: 0;
      transform: translateX(100%);
    }
  }

  .animate-slide-in-right {
    animation: slideInRight 0.35s cubic-bezier(0.32, 0.72, 0, 1) forwards;
  }

  .animate-slide-out-right {
    animation: slideOutRight 0.3s cubic-bezier(0.32, 0.72, 0, 1) forwards;
  }

  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Hide native search clear button (keep custom one) */
  .search-no-native-clear::-webkit-search-cancel-button {
    -webkit-appearance: none;
    appearance: none;
  }

  /* Smooth layout transitions when filter changes affect grid items */
  .market-grid-transition {
    transition: grid-template-columns 0.3s ease-out, gap 0.3s ease-out;
  }
  .market-item-transition {
    transition: width 0.3s ease-out, min-width 0.3s ease-out, max-width 0.3s ease-out, flex 0.3s ease-out;
  }

  /* View Transition API: smooth layout when filters change */
  @supports (view-transition-name: none) {
    ::view-transition-old(root),
    ::view-transition-new(root) {
      animation-duration: 0.3s;
      animation-timing-function: ease-out;
    }
    /* Keep filter header and main container stable during view transitions (no morph/flash) */
    [data-market-header],
    [data-market-main] {
      view-transition-name: none;
    }
  }

  .animate-shimmer {
    animation: shimmer 2s linear infinite;
    background: linear-gradient(
      to right,
      transparent 0%,
      rgba(255, 255, 255, 0.1) 50%,
      transparent 100%
    );
    background-size: 1000px 100%;
  }
}

@layer components {
  /* “Glass card” primitives used across the site */
  .vn-glass {
    background-color: rgba(var(--vn-surface), var(--vn-surface-alpha));
    border: 1px solid rgba(255, 255, 255, var(--vn-border-alpha));
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
    box-shadow:
      var(--vn-shadow),
      inset 0 1px 0 rgba(255, 255, 255, 0.55);
    position: relative;
    overflow: hidden;
  }
  .vn-glass::after {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    opacity: 0.35;
    background:
      radial-gradient(600px 180px at 30% 0%, rgba(255, 255, 255, 0.55), transparent 60%),
      radial-gradient(450px 160px at 100% 30%, rgba(45, 90, 39, 0.14), transparent 55%);
  }

  /* A slightly richer glass for hero sections */
  .vn-glass-hero {
    background-color: rgba(255, 255, 255, 0.68);
    border: 1px solid rgba(255, 255, 255, 0.48);
    backdrop-filter: blur(18px);
    -webkit-backdrop-filter: blur(18px);
    box-shadow:
      0 24px 70px rgba(15, 23, 42, 0.18),
      inset 0 1px 0 rgba(255, 255, 255, 0.65);
    position: relative;
    overflow: hidden;
  }
  .vn-glass-hero::before {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    background:
      radial-gradient(700px 240px at 30% 0%, rgba(255, 255, 255, 0.55), transparent 60%),
      linear-gradient(135deg, rgba(45, 90, 39, 0.10), transparent 55%);
    opacity: 0.9;
  }

  .vn-glass-dark {
    background-color: rgba(15, 23, 42, 0.42);
    border: 1px solid rgba(255, 255, 255, 0.18);
    backdrop-filter: blur(18px);
    -webkit-backdrop-filter: blur(18px);
    box-shadow:
      0 28px 80px rgba(0, 0, 0, 0.35),
      inset 0 1px 0 rgba(255, 255, 255, 0.12);
    position: relative;
    overflow: hidden;
  }
  .vn-glass-dark::before {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    opacity: 0.75;
    background:
      radial-gradient(900px 280px at 20% 0%, rgba(255, 255, 255, 0.12), transparent 60%),
      radial-gradient(650px 260px at 100% 40%, rgba(45, 90, 39, 0.22), transparent 55%);
  }

  .vn-card {
    @apply rounded-2xl;
  }

  .vn-card-pad {
    @apply p-5 sm:p-6;
  }

  .vn-card-hover {
    transition: box-shadow 220ms ease, border-color 220ms ease;
  }
  .vn-card-hover:hover {
    box-shadow:
      0 24px 48px rgba(15, 23, 42, 0.12),
      inset 0 1px 0 rgba(255, 255, 255, 0.65);
  }

  .vn-section-head {
    @apply mb-10 sm:mb-12 text-center flex flex-col items-center gap-3;
  }
  .vn-section-title {
    @apply vn-title;
  }
  .vn-section-divider {
    height: 2px;
    width: 72px;
    border-radius: 999px;
    background: linear-gradient(
      90deg,
      rgba(45, 90, 39, 0.15),
      rgba(45, 90, 39, 0.85),
      rgba(45, 90, 39, 0.15)
    );
  }

  .vn-title {
    @apply text-3xl sm:text-4xl font-semibold tracking-tight text-slate-900;
  }

  .vn-subtitle {
    @apply text-base sm:text-lg text-slate-600;
  }

  .vn-btn {
    @apply inline-flex items-center justify-center gap-2 rounded-xl px-5 py-3 font-medium transition-all duration-200;
    @apply focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2;
  }

  .vn-btn-primary {
    background: linear-gradient(180deg, #2d7a2a 0%, #1e5c1c 100%);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: white;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.08);
  }
  .vn-btn-primary:hover {
    background: linear-gradient(180deg, #338830 0%, #256d22 100%);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12);
    transform: translateY(-1px);
  }
  .vn-btn-primary:active {
    transform: translateY(0px);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.06);
  }
  .vn-btn-primary:focus-visible {
    outline-color: #2d7a2a;
  }

  .vn-btn-ghost {
    background: linear-gradient(180deg, #f8fafc 0%, #e2e8f0 100%);
    border: 1px solid #cbd5e1;
    color: rgb(15, 23, 42);
  }
  .vn-btn-ghost:hover {
    background: linear-gradient(180deg, #f1f5f9 0%, #cbd5e1 100%);
    border-color: #94a3b8;
    transform: translateY(-1px);
  }
  .vn-btn-ghost:active {
    transform: translateY(0px);
  }

  .vn-pill {
    @apply inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs sm:text-sm font-medium;
    background-color: rgba(255, 255, 255, 0.42);
    border: 1px solid rgba(255, 255, 255, 0.55);
    color: rgb(51, 65, 85);
  }

  /* Market list view card: ss.ge-style, white, clean */
  .market-list-card {
    @apply rounded-xl overflow-hidden bg-white;
    box-shadow: 0 1px 3px rgba(15, 23, 42, 0.08);
    border: 1px solid rgba(15, 23, 42, 0.06);
    transition: box-shadow 220ms ease, border-color 200ms ease;
  }
  .market-list-card:hover {
    box-shadow: 0 4px 12px rgba(15, 23, 42, 0.1);
    border-color: rgba(15, 23, 42, 0.1);
  }
  /* Mobile-only: improved list card design */
  @media (max-width: 639px) {
    .market-list-card {
      @apply rounded-2xl;
      box-shadow: 0 2px 8px rgba(15, 23, 42, 0.08);
      border: 1px solid rgba(15, 23, 42, 0.08);
    }
    .market-list-card:active {
      box-shadow: 0 1px 4px rgba(15, 23, 42, 0.1);
    }
  }

  .vn-link {
    color: rgb(var(--vn-brand-strong));
    text-decoration: underline;
    text-underline-offset: 3px;
  }
  .vn-link:hover {
    color: rgb(var(--vn-brand));
  }
}
